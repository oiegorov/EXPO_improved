<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="description goes here" />
    <meta name="keywords" content="keywords,goes,here" />
    <meta name="author" content="Your Name" />
    <meta name="generator" content="webgen - http://webgen.rubyforge.org" />
    <link rel="stylesheet" type="text/css" href="default.css" />
    <!--[if IE 6]>
        <link rel="stylesheet" href="browserfix.css" type="text/css" />
        <![endif]-->
    <title>Code samples</title>
  </head>

  <body>
    <div id="sidebar">
      <h1>Expo</h1>
      <h2>EXPeriment cOnduct</h2>

      <div id="menu">
        <ul><li class="webgen-menu-level1"><a href="index.html">Expo homepage</a></li><li class="webgen-menu-level1 webgen-menu-item-selected"><span>Code samples</span></li><li class="webgen-menu-level1"><a href="publications.html">Related Publications</a></li></ul>
      </div>

      <h3>Links:</h3>
      <ul>
        <li><a href="https://gforge.inria.fr/projects/expo/">Expo forge</a></li>
      </ul>
    </div>

    <div id="content">
      <h2 id='a_simple_expo_program'>A simple expo program</h2>
<div class='CodeRay'>
  <div class='code'><pre><span class='no'>1</span> require <span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>'</span><span style=''>expo_g5k</span><span style='color:#710'>'</span></span>
<span class='no'>2</span> oargridsub <span style='color:#A60'>:res</span> =&gt; <span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>gdx:nodes=10,helios:nodes=10</span><span style='color:#710'>&quot;</span></span>
<span class='no'>3</span> check <span style='color:#d70;font-weight:bold'>$all</span>
<span class='no'>4</span> ptask <span style='color:#d70;font-weight:bold'>$all</span>.gateway, <span style='color:#d70;font-weight:bold'>$all</span>, <span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>date</span><span style='color:#710'>&quot;</span></span>
<span class='no'>5</span> id, res = ptask <span style='color:#d70;font-weight:bold'>$all</span>[<span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>gdx</span><span style='color:#710'>&quot;</span></span>].gateway, <span style='color:#d70;font-weight:bold'>$all</span>[<span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>gdx</span><span style='color:#710'>&quot;</span></span>], <span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>sleep 1</span><span style='color:#710'>&quot;</span></span>
<span class='no'>6</span> res.each { |r| puts r.duration }
<span class='no'>7</span> puts <span style='background-color:#fff0f0;color:#D20'><span style='color:#710'>&quot;</span><span style=''>mean : </span><span style='color:#710'>&quot;</span></span> + res.mean_duration
</pre></div>
</div>
<p>This simple program takes place in the Grid&#8217;5000 context. 20 resources are obtained from 2 different clusters : helios and gdx. Those resources are checked for non responding machines. After that each resource execute the date command the result of the command is unused. After that each resource from gdx runs the sleep 1 command. The duration of those commands is automatically logged. The duration of the command for each resource is printed on screen. The mean is also displayed.</p>

      <h2>site info</h2>
      <p>&copy; 2005-2009 Brice Videau | Generated by <a href="http://webgen.rubyforge.org">webgen</a> | Design by <a href="http://andreasviklund.com">Andreas Viklund</a>.</p>
    </div>
  </body>
</html>
